$(document).ready(function(){function e(e){if(e.type.match(/image.*/)){var a=new FileReader;a.addEventListener("load",function(e){i.attr("src",e.target.result),r.show(),t.cropper("replace",e.target.result)}),a.readAsDataURL(e)}}console.log("add material page");var t,a=document.getElementById("image"),i=$(".preview-edit"),r=$(".js-popup"),n=$(".js-popup-submit"),o=$(".js-popup-close");a.addEventListener("change",function(){e(this.files[0])}),t=$(".preview-edit"),t.cropper({background:!1,autoCropArea:1,preview:".extra-preview",aspectRatio:1,crop:function(e){$(".js-x1").val(e.x),$(".js-y1").val(e.y),$(".js-width").val(e.width),$(".js-height").val(e.height)}}),n.on("click",function(){r.hide()}),o.on("click",function(){r.hide(),a.value=""})});